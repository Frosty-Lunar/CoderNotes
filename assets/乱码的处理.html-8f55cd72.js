import{_ as a}from"./plugin-vue_export-helper-c27b6911.js";import{o as n,c as s,f as t}from"./app-5f4e7946.js";const e="/CoderNotes/assets/image-20230819181244994-ce19962c.png",o="/CoderNotes/assets/image-20230819181846983-f40f20c0.png",p="/CoderNotes/assets/image-20230819182017218-cca62f8b.png",c="/CoderNotes/assets/image-20230819183205884-b2fcc841.png",i="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAG4AAAAeCAIAAABCG7xtAAAA1klEQVRoge2YQQrDMAwEndLf+HN6ip7cg8G0TuqqZUKJvHNKFAfEsI5MtlprEQS3fzeQB6nEkEoMqcSQSgypxJBKDKnE+EWlu+MrE3BuKs1sHZv3yKK9jqFiZlhHlyWksrzKcvfh9vB6UkypPqoySHc06D6sJEMTHOMslcPASR/JolSCbJFfvx8PNO8S18K4QiQLPsH3by3isQQ3+NzF5GlP5dd9XZATv5U9j4vYhM+VjSbuOa3dZuLNDquc+GrFxEJDE1xE0LkSQyoxpBJDKjGkEkMqMR6pulQZVK6+ywAAAABJRU5ErkJggg==",l="/CoderNotes/assets/image-20230819194714712-1f9668e4.png",u="/CoderNotes/assets/image-20230819193648243-1b8a0904.png",r={},d=t('<h1 id="关于乱码问题" tabindex="-1"><a class="header-anchor" href="#关于乱码问题" aria-hidden="true">#</a> 关于乱码问题</h1><h2 id="控制台乱码问题" tabindex="-1"><a class="header-anchor" href="#控制台乱码问题" aria-hidden="true">#</a> 控制台乱码问题</h2><p>Tomcat启动的过程中，控制台乱码；<br><img src="'+e+'" alt="image-20230819181244994" loading="lazy"></p><p>解决方式：Tomcat的配置文件<code>logging.properties</code>中的所有UTF-8字符替换为GBK。</p><p><img src="'+o+'" alt="image-20230819181846983" loading="lazy"><br><img src="'+p+'" alt="image-20230819182017218" loading="lazy"></p><h2 id="post请求方式" tabindex="-1"><a class="header-anchor" href="#post请求方式" aria-hidden="true">#</a> POST请求方式</h2><p>当我们form表单的请求方式为<code>POST</code>请求时，提交中文数据到后台Servlet接收，如果不经处理，则接收到的数据为乱码。如下图所示，前端所传数据为<code>中文</code>两个字。</p><p><img src="'+c+`" alt="image-20230819183205884" loading="lazy"><br> 乱码原因：Tomcat默认的编码形式为<code>ISO-8859-1</code>，浏览器发起请求传递的编码形式为UTF-8，因此后端解析请求体参数时需要设置编码为UTF-8。</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>req<span class="token punctuation">.</span><span class="token function">setCharacterEncoding</span><span class="token punctuation">(</span><span class="token string">&quot;UTF-8&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>在通过HttpServletRequest获取参数前设置请求编码为UTF-8，即可解决中文乱码问题。<img src="`+i+`" alt="image-20230819185713489" loading="lazy"></p><h2 id="get请求乱码" tabindex="-1"><a class="header-anchor" href="#get请求乱码" aria-hidden="true">#</a> GET请求乱码</h2><p>当form表单使用get方式发起请求时，如果存在中文则会出现乱码现象。此时有两种解决方案：</p><ul><li>解决方案一：</li></ul><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>    <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> bytes <span class="token operator">=</span> username<span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token string">&quot;iso-8859-1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">String</span> usernameb <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span>bytes<span class="token punctuation">,</span><span class="token string">&quot;UTF-8&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//使用上述方案虽然可以解决问题，但是比较繁琐，每当多一个参数重新设置一遍，推荐使用第二种方式解决</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><p>解决方案二：</p><ul><li>设置Tomcat的配置文件<code>server.xml</code>中的URI编码：</li></ul></li></ul><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code>     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Connector</span> <span class="token attr-name">port</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>8080<span class="token punctuation">&quot;</span></span> <span class="token attr-name">protocol</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>HTTP/1.1<span class="token punctuation">&quot;</span></span>
                <span class="token attr-name">connectionTimeout</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>20000<span class="token punctuation">&quot;</span></span>
                <span class="token attr-name">redirectPort</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>8443<span class="token punctuation">&quot;</span></span> <span class="token attr-name">URIEncoding</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>utf-8<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>注意：在Tomcat 9.0版本中，Get方式请求不存在中文乱码问题；</p></blockquote><h2 id="响应乱码" tabindex="-1"><a class="header-anchor" href="#响应乱码" aria-hidden="true">#</a> 响应乱码</h2><p>我们使用响应<code>HttpServletResponse</code>将数据显示到浏览器窗口中时，如果包含中文，则会显示乱码。</p><figure><img src="`+l+`" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>此时可以通过设置响应流的编码以及设置浏览器应该以哪种编码解析的方式解决。</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token comment">//设置响应流编码为UTF-8</span>
resp<span class="token punctuation">.</span><span class="token function">setCharacterEncoding</span><span class="token punctuation">(</span><span class="token string">&quot;UTF-8&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//告诉浏览器以UTF-8编码解析</span>
resp<span class="token punctuation">.</span><span class="token function">setContentType</span><span class="token punctuation">(</span><span class="token string">&quot;text/html;charset=UTF-8&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>注意：设置响应流编码应该在获取打印流之前设置，否则不生效。</p></blockquote><figure><img src="`+u+`" alt="image-20230819193648243" tabindex="0" loading="lazy"><figcaption>image-20230819193648243</figcaption></figure><h2 id="下载文件名乱码" tabindex="-1"><a class="header-anchor" href="#下载文件名乱码" aria-hidden="true">#</a> 下载文件名乱码</h2><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>resp<span class="token punctuation">.</span><span class="token function">addHeader</span><span class="token punctuation">(</span><span class="token string">&quot;Content-Disposition&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;attachment;filename=&quot;</span><span class="token operator">+</span><span class="token keyword">new</span> <span class="token class-name">String</span> <span class="token punctuation">(</span>file<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token string">&quot;gbk&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">&quot;iso-8859-1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div>`,26),k=[d];function g(m,v){return n(),s("div",null,k)}const q=a(r,[["render",g],["__file","乱码的处理.html.vue"]]);export{q as default};
